@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<div class="page-layout">
    <header class="header">
        <div class="container header-container">
            <div class="logo">
                <a href="/">
                    <span class="logo-text">Mohamed Riadh Sahnoun</span>
                    <span class="logo-subtitle">Building .NET Solutions that don’t crash (on purpose)</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li class="mobile-nav-item">
                        <a class="mobile-nav-link @(RelativeRoute == ""? "active": "")" @onclick="@(() => CloseMenu("/"))">Home</a>
                    </li>
                    <li class="mobile-nav-item">
                        <a class="mobile-nav-link @(RelativeRoute == "projects"? "active": "")" @onclick="@(() => CloseMenu("projects"))">Projects</a>
                    </li>
                    <li class="mobile-nav-item">
                        <a class="mobile-nav-link @(RelativeRoute == "experience"? "active": "")" @onclick="@(() => CloseMenu("experience"))">Experience</a>
                    </li>
                    <li class="mobile-nav-item">
                        <a class="mobile-nav-link @(RelativeRoute == "skills"? "active": "")" @onclick="@(() => CloseMenu("skills"))">Skills</a>
                    </li>
                    <li class="mobile-nav-item">
                        <a class="mobile-nav-link @(RelativeRoute == "contact"? "active": "")" @onclick="@(() => CloseMenu("contact"))">Contact</a>
                    </li>
                </ul>
            </nav>
            <button class="mobile-menu-toggle" @onclick="ToggleMenu">
                <span class="toggle-icon"></span>
            </button>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            @Body
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-copyright">
                    © @DateTime.Now.Year Mohamed Riadh Sahnoun. All rights reserved.
                </div>
                <div class="footer-social">
                    <a href="https://github.com/mrsoh" target="_blank" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                        </svg>
                    </a>
                    <a href="https://linkedin.com/in/mrsoh" target="_blank" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </a>
                    <a href="mailto:mrsoh@outlook.fr" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    @if (menuOpen)
    {
        <div class="mobile-menu-overlay" @onclick="@(() => CloseMenu(String.Empty))">
            <div class="mobile-menu" @onclick:stopPropagation="true">
                <div class="mobile-menu-header">
                    <span class="mobile-menu-title">Menu</span>
                    <button class="mobile-menu-close" @onclick="@(() => CloseMenu(String.Empty))">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <nav class="mobile-nav">
                    <ul class="mobile-nav-list">
                        <li class="mobile-nav-item">
                            <a class="mobile-nav-link @(RelativeRoute == ""? "active": "")" @onclick="@(() => CloseMenu("/"))">Home</a>
                        </li>
                        <li class="mobile-nav-item">
                            <a class="mobile-nav-link @(RelativeRoute == "projects"? "active": "")" @onclick="@(() => CloseMenu("projects"))">Projects</a>
                        </li>
                        <li class="mobile-nav-item">
                            <a class="mobile-nav-link @(RelativeRoute == "experience"? "active": "")" @onclick="@(() => CloseMenu("experience"))">Experience</a>
                        </li>
                        <li class="mobile-nav-item">
                            <a class="mobile-nav-link @(RelativeRoute == "skills"? "active": "")" @onclick="@(() => CloseMenu("skills"))">Skills</a>
                        </li>
                        <li class="mobile-nav-item">
                            <a class="mobile-nav-link @(RelativeRoute == "contact"? "active": "")" @onclick="@(() => CloseMenu("contact"))">Contact</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    }
</div>

@code {
    private bool menuOpen = false;
    private string RelativeRoute => NavigationManager.Uri.Replace(NavigationManager.BaseUri, "");

    private void ToggleMenu() => menuOpen = !menuOpen;

    private void CloseMenu(string relativePath)
    {
        menuOpen = false;

        if (!String.IsNullOrEmpty(relativePath))
            NavigationManager.NavigateTo(relativePath);
    }
}